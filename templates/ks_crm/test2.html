<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>KSJY_CRM | CRM</title>

    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/bootstrap/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/static/bootstrap/css/animate.css" rel="stylesheet">
    <link href="/static/bootstrap/css/style.css" rel="stylesheet">
    <!-- FooTable -->
    <link href="/static/bootstrap/css/plugins/footable/footable.core.css" rel="stylesheet">

    <link href="/static/bootstrap/css/plugins/cropper/cropper.min.css" rel="stylesheet">


</head>

<body>

    <div id="wrapper">
<!------------------left_menu_start----------------->
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">

                    <div class="dropdown profile-element">

                            <span>
                                <img alt="image" class="img-circle" src="/media/head_imgs/admin_head.jpg" style="max-width: 60px;max-height:60px"/>
                             </span>

                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">admin</strong>
                             </span> <span class="text-muted text-xs block">admin<b class="caret"></b></span> </span> </a>
                        <ul class="dropdown-menu animated fadeInRight m-t-xs">
                            <li><a href="#">Profile</a></li>
                            <li><a href="#">Contacts</a></li>
                            <li><a href="#">Mailbox</a></li>
                            <li class="divider"></li>
                            <li><a href="/account/logout">Logout</a></li>
                        </ul>
                    </div>
                    <div class="logo-element">
                        KSJY
                    </div>
                </li>


                  <ul class="nav nav-sidebar">


                        <li>
                            <a href="/crm/stu_index"><i class="fa fa-flask"></i> <span class="nav-label">学生首页</span></a>
                        </li>

                        <li>
                            <a href="/crm/lesson_video"><i class="fa fa-film"></i> <span class="nav-label">视频课程</span></a>
                        </li>

                        <li>
                            <a href="/crm/testing_system"><i class="fa fa-book"></i> <span class="nav-label">题库系统</span></a>
                        </li>

                        <li>
                            <a href="/ts/new_test_paper/"><i class="fa fa-pied-piper-alt"></i> <span class="nav-label">试卷发布</span></a>
                        </li>

                        <li>
                            <a href="/crm/new_article"><i class="fa fa-newspaper-o"></i> <span class="nav-label">新闻发布</span></a>
                        </li>

                        <li>
                            <a href="/crm/new_action"><i class="fa fa-heart"></i> <span class="nav-label">活动发布</span></a>
                        </li>

                        <li>
                            <a href="/crm/faq_editors"><i class="fa fa-question"></i> <span class="nav-label">常见问题</span></a>
                        </li>

                        <li>
                            <a href="/crm/new_course"><i class="fa fa-graduation-cap"></i> <span class="nav-label">课程发布</span></a>
                        </li>

                        <li>
                            <a href="/crm/profile_editors"><i class="fa fa-user"></i> <span class="nav-label">个人信息</span></a>
                        </li>



                </ul>




                <li class="landing_link">
                    <a target="_blank" href="/"><i class="fa fa-star"></i> <span class="nav-label">Landing Page</span> <span class="label label-warning pull-right">NEW</span></a>
                </li>
                <li class="special_link">
                    <a href="/crm/"><i class="fa fa-database"></i> <span class="nav-label">Package</span></a>
                </li>
            </ul>

        </div>
    </nav>
<!------------------left_menu_end----------------->

        <div id="page-wrapper" class="gray-bg">
<!------------------right_top_menu_start----------------->
        <div class="row border-bottom">

        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" action="#">
                <div class="form-group">
                    <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
                </div>
            </form>
        </div>
            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">Welcome to KSJY crm system.</span>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="#" class="pull-left">
                                    <img alt="image" class="img-circle" src="/static/imgs/avatar4.jpg">
                                </a>
                                <div class="media-body">
                                    <small class="pull-right">46h ago</small>
                                    <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br>
                                    <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="#" class="pull-left">
                                    <img alt="image" class="img-circle" src="/static/imgs/avatar4.jpg">
                                </a>
                                <div class="media-body ">
                                    <small class="pull-right text-navy">5h ago</small>
                                    <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br>
                                    <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="#" class="pull-left">
                                    <img alt="image" class="img-circle" src="/static/imgs/avatar4.jpg">
                                </a>
                                <div class="media-body ">
                                    <small class="pull-right">23h ago</small>
                                    <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br>
                                    <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="text-center link-block">
                                <a href="#">
                                    <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                                </a>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="text-center link-block">
                                <a href="#">
                                    <strong>See All Alerts</strong>
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            </div>
                        </li>
                    </ul>
                </li>


                <li>
                    <a href="/account/logout">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
            </ul>

        </nav>

        </div>
<!------------------right_top_menu_end----------------->


<!------------------right_top_app_path_start----------------->

<!------------------right_top_app_path_end----------------->



    <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>Profile Editor</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        <li>
                            <a>KS CRM</a>
                        </li>
                        <li class="active">
                            <strong>Profile Editor</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>

    <div class="wrapper wrapper-content">
                    <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title  back-change">
                        <h5>上传头像 </h5>
                    </div>
                    <div class="ibox-content">

                        <div class="row">
                            <div class="col-md-6">
                                <div class="image-crop">

                                        <img alt="image" id="image" class="img-circle" src="/media/head_imgs/admin_head.jpg" style="max-width: 400px;max-height: 400px"/>


                                </div>
                            </div>
                            <div class="col-md-6">
                                <h4>Preview image</h4>
                                <div class="img-preview img-preview-sm"></div>
                                <h4>Comon method</h4>
                                <p>
                                    You can upload new image to crop container and easy download new cropped image.
                                </p>
                                <div class="btn-group">
                                    <label title="Upload image file" for="inputImage" class="btn btn-primary">
                                        <input type="file" accept="image/*" name="file" id="inputImage" class="hide">
                                        选择图片
                                    </label>
                                    <label  id="upload_image" class="btn btn-primary">修改头像</label>
                                </div>
                                    <h4>裁剪控制</h4>
                                    <p><small>通过下面方法可以操作画布</small></p>
                                <div class="btn-group">
                                    <button class="btn btn-white" id="zoomIn" type="button">放大</button>
                                    <button class="btn btn-white" id="zoomOut" type="button">缩小</button>
                                    <button class="btn btn-white" id="rotateLeft" type="button">左旋转</button>
                                    <button class="btn btn-white" id="rotateRight" type="button">右旋转</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>个人信息</h5>
                            </div>
                            <div class="ibox-content">
                                <form method="post" class="form-horizontal" action="/crm/profile_editors"><input type='hidden' name='csrfmiddlewaretoken' value='apuicFi2MXJ5TcUQklQwmAR6F1lRBRcyNAbCUfm3NgddmE6fH2JsFiYgx0f6zCoB' />
                                    <div class="form-group"><label class="col-sm-2 control-label">注册邮箱</label>
                                        <div class="col-sm-2"><input type="text" required="true" name="email" disabled="" class="form-control" value="admin@admin.com"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">用户名称</label>
                                        <div class="col-sm-4"><input type="text" required="true" name="name" class="form-control" value="admin"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">性别<br/></label>
                                    <div class="col-sm-10">
                                        <div><label> <input type="radio" checked="" value="male" id="optionsRadios1" name="gender"> 男</label><label> <input type="radio" value="female" id="optionsRadios2" name="gender" style="margin-left: 10px"> 女</label></div>

                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">用户密码</label>
                                        <div class="col-sm-4"><input type="password" required="true" name="password" disabled="" class="form-control" value="pbkdf2_sha256$30000$9z6ImmBKGVpd$G6jfaUO15B4CJH7z+vydvkMussyIu8HkhXDqA6PPLt8=">
                                        <a href="/account/password_resetting"><span class="help-block m-b-none">修改密码</span></a>
                                        </div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">用户角色</label>
                                        <div class="col-sm-2"><input type="text" required="true" name="role"  disabled="" class="form-control-static" value="admin">
                                        <span class="help-block m-b-none">修改用户角色请通知管理员</span>
                                        </div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">个人签名</label>
                                        <div class="col-sm-10"><input type="text"  name="signature" class="form-control" value=" Cannot update model field &lt;django.db.models.fields.related.ManyToManyField: course&gt; (only non-relations and foreign keys permitted)"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">联系电话</label>
                                        <div class="col-sm-4"><input type="text"  name="phone" class="form-control" value="135"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                     <div class="form-group"><label class="col-sm-2 control-label">联系地址</label>
                                        <div class="col-sm-10"><input type="text"  name="address" class="form-control" value="深圳"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">个人爱好</label>
                                        <div class="col-sm-10"><input type="text"  name="hobbies" class="form-control" value="吃饭睡觉"></div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label class="col-sm-2 control-label">报名课程</label>
                                        <div class="col-sm-4">
                                            <select class="form-control m-b" name="course"  multiple="multiple">

                                                <option value="1">面试协议保过班</option>

                                                <option value="2">面试精英班</option>

                                                <option value="3">yesthej</option>

                                            </select>
                                        </div>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group">
                                        <div class="col-sm-4 col-sm-offset-5">
                                            <button class="btn btn-white" type="button">cancel</button>
                                            <button class="btn btn-primary" type="submit">确认修改</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
            </div>
        </div>



<!------------------footer-start----------------->
            <div class="footer">
                <div class="pull-right">
                    10GB of <strong>250GB</strong> Free.
                </div>
                <div>
                    <strong>Copyright</strong> ksjy Company &copy; 2018-2040
                </div>
            </div>
<!------------------footer-end----------------->

        </div>

        </div>



    <!-- Mainly scripts -->
    <script src="/static/bootstrap/js/jquery-2.1.1.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/bootstrap/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/bootstrap/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/static/bootstrap/js/inspinia.js"></script>
    <script src="/static/bootstrap/js/plugins/pace/pace.min.js"></script>
    <!-- FooTable -->
    <script src="/static/bootstrap/js/plugins/footable/footable.all.min.js"></script>



    <!------------------crsf_token_ajax----------------->
    <script type="text/javascript">

        // using jQuery
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        var csrftoken = getCookie('csrftoken');

        function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });
    </script>


    <!-- Image cropper -->
    <script src="/static/bootstrap/js/plugins/cropper/cropper.js"></script>




<script type="text/javascript">

    $(document).ready(function() {

        var image = document.getElementById('image');
        var cropper = new Cropper(image, {
          aspectRatio: 1,
          minContainerWidth:400,
          minContainerHeight:400,
          preview: ".img-preview",
          crop: function(event) {
          }
        });



        var $inputImage = $("#inputImage");
        if (window.FileReader) {
            $inputImage.change(function () {
                var fileReader = new FileReader(),
                    files = this.files,
                    file;

                if (!files.length) {
                    return;
                }

                file = files[0];

                if (/^image\/\w+$/.test(file.type)) {
                    fileReader.readAsDataURL(file);
                    fileReader.onload = function () {
                        $inputImage.val("");
                        cropper.reset();
                        cropper.replace(this.result);

                    };
                } else {
                    showMessage("Please choose an image file.");
                }
            });
        } else {
            $inputImage.addClass("hide");
        }



        $("#zoomIn").click(function () {
            cropper.zoom(0.1);
        });

        $("#zoomOut").click(function () {
            cropper.zoom(-0.1);
        });

        $("#rotateLeft").click(function () {
            cropper.rotate(45);
        });

        $("#rotateRight").click(function () {
            cropper.rotate(-45);
        });



        $("#upload_image").click(function () {
            // Upload cropped image to server if the browser supports `HTMLCanvasElement.toBlob`
            cropper.getCroppedCanvas(
                {width:150,
                height:150,
                minWidth:150,
                minHeight:150,
                }
            ).toBlob(function (blob) {
                var formData = new FormData();

                formData.append('croppedImage', blob);
                formData.append('filename', "admin_head.jpg");

                // Use `jQuery.ajax` method
                $.ajax('/crm/image_upload/head_img/', {
                    method: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        console.log('Upload success');
                    },
                    error: function () {
                        console.log('Upload error');
                    }
                });
            });
        });
    });
</script>


</body>

</html>
